current_palette = (current_palette+1) mod MAX_PALETTES;
alarm[0] = cycle_delay;